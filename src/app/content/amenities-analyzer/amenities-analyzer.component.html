<div class="amenities-analyzer">
  <!-- Full Page Loading State -->
  <div *ngIf="isLoading" class="d-flex justify-content-center align-items-center" style="min-height: 60vh;">
    <div class="text-center">
      <div class="spinner-border text-primary mb-3" role="status" style="width: 3rem; height: 3rem;">
        <span class="visually-hidden">Loading...</span>
      </div>
      <h4 class="text-muted">Loading Amenities Analysis</h4>
      <p class="text-muted">Analyzing conversion boosters and area amenities...</p>
    </div>
  </div>

  <!-- Main Content (hidden while loading) -->
  <div *ngIf="!isLoading" class="main-content">
    <!-- Comprehensive Empty State when all data is empty -->
    <app-empty-state 
      *ngIf="isAllDataEmpty"
      icon="fas fa-chart-bar"
      title="No Amenities Analysis Data Available">
    </app-empty-state>

    <!-- Individual sections when data is available -->
    <div *ngIf="!isAllDataEmpty">
      <!-- Ranking & Conversion Boosters Section -->
      <div class="section">
      <div class="section-header">
        <h2>Ranking & Conversion Boosters</h2>
        <p class="section-description">
          Our research has found these amenities to boost visibility & conversions for most listings. 
          Green shows amenities you have & red shows missing amenities.
        </p>
      </div>
      
      <div class="amenities-grid" *ngIf="rankingBoosters.length > 0">
        <div class="amenity-chip" 
             [ngClass]="{'has-amenity': item.has, 'missing-amenity': !item.has}"
             *ngFor="let item of rankingBoosters">
          <div class="amenity-icon">
            <i class="fas" [ngClass]="item.has ? 'fa-check' : 'fa-times'"></i>
          </div>
          <span class="amenity-name">{{ item.name }}</span>
          <div class="info-icon">
            <i class="fas fa-info-circle"></i>
          </div>
        </div>
      </div>
      
      <!-- No data message for conversion boosters -->
      <app-empty-state 
        *ngIf="rankingBoosters.length === 0"
        icon="fas fa-chart-line"
        title="No Conversion Boosters Data Available">
      </app-empty-state>
    </div>

    <!-- Top Ranking Amenities Section -->
    <div class="section">
      <div class="section-header">
        <h2>Top Ranking Amenities in Your Area (from popular to rare)</h2>
        <p class="section-description">
          You're missing these high-ranking items based on your local area.
        </p>
        <div class="tip-box">
          <strong>Tip:</strong> Items listed below are not always found in the Airbnb Amenities section of the Airbnb editor. 
          Some items are found under 'House Rules', 'Check-in method' or 'Accessibility'.
        </div>
      </div>
      
      <div class="amenities-grid" *ngIf="topRankingAmenities.length > 0">
        <div class="amenity-chip missing-amenity" *ngFor="let amenity of topRankingAmenities">
          <div class="amenity-icon">
            <i class="fas fa-times"></i>
          </div>
          <span class="amenity-name">{{ amenity }}</span>
          <div class="info-icon">
            <i class="fas fa-info-circle"></i>
          </div>
        </div>
      </div>
      
      <!-- No data message for top area amenities -->
      <app-empty-state 
        *ngIf="topRankingAmenities.length === 0"
        icon="fas fa-map-marker-alt"
        title="No Area Amenities Data Available">
      </app-empty-state>
    </div>
    </div><!-- End of individual sections -->
  </div><!-- End of main-content -->
</div>