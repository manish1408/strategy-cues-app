<!-- Only chatbot content -->
<ng-container *ngIf="isOperatorPage;else mainContent">
  <router-outlet></router-outlet>
</ng-container>
<ng-template #mainContent>
  <ng-container *ngIf="!isLoggedIn">
    <main class="auth-content">
      <router-outlet></router-outlet>
    </main>
  </ng-container>

  <ng-container *ngIf="isLoggedIn">
    <div class="wrapper">
      <!-- Sidebar -->
      <aside id="sidebar" [class.collapsed]="isCollapsed">
        <div class="w-100">
          <!-- Sidebar Navigation -->

          <div class="d-flex align-items-center justify-content-between">
            <img class="brand-logo img-fluid" src="https://strategycues.com/wp-content/uploads/2025/02/Asset-2-8.png" />

            <img src="assets/icons/arrow-square-left.svg" (click)="toggleSidebar()" class="cursor-pointer" />
          </div>

          <ul class="sidebar-nav mt-4">

            <!-- New Pages -->
            <li class="sidebar-menu-item">
              <a routerLink="/revenue" [queryParams]="{ id: selectedOperator?._id }" routerLinkActive="active-link" class="sidebar-link">
                <i class="fas fa-chart-line me-2"></i>
                Revenue Cues
              </a>
            </li>

            <li class="sidebar-menu-item">
              <a routerLink="/content" [queryParams]="{ id: selectedOperator?._id }" routerLinkActive="active-link" class="sidebar-link">
                <i class="fas fa-file-alt me-2"></i>
                Content Cues
              </a>
            </li>

            <li class="sidebar-menu-item">
              <a routerLink="/deployment" [queryParams]="{ id: selectedOperator?._id }" routerLinkActive="active-link" class="sidebar-link">
                <i class="fas fa-rocket me-2"></i>
                Deployment Cues
              </a>
            </li>

            <li class="sidebar-menu-item">
              <a routerLink="/status" [queryParams]="{ id: selectedOperator?._id }" routerLinkActive="active-link" class="sidebar-link">
                <i class="fas fa-heartbeat me-2"></i>
                Status Cues
              </a>
            </li>

            <li class="sidebar-menu-item">
              <a routerLink="/listing" [queryParams]="{ id: selectedOperator?._id }" routerLinkActive="active-link" class="sidebar-link">
                <i class="fas fa-list me-2"></i>
                Listings
              </a>
            </li>

          </ul>



        </div>
        <!-- <div class="sidebar-card">
        <img src="assets/icons/dots.svg" />
        <h2>Get dedicated help to build your Agent</h2>
      </div> -->
      </aside>
      <!-- Main Component -->
      <div class="main" >
        <nav class="navbar navbar-expand px-3 justify-content-between top-nav">
          <div class="d-flex align-items-center justify-content-between">
            <img *ngIf="isCollapsed" src="assets/icons/arrow-square-left.svg" (click)="toggleSidebar()"
              class="cursor-pointer collapse-arrow me-2" />
            <div class="dropdown">
              <button type="button" class="btn chat-drop-btn dropdown-toggle" data-bs-toggle="dropdown"
                aria-expanded="false">
                {{
                (selectedOperator?.name ) || "Select Operator"
                }}
              </button>

              <ul class="dropdown-menu chat-drop p-0">
                <li>
                  <a routerLink="/all-operators" class="dropdown-item">
                    All Operators</a>
                </li>
               
                <li *ngFor="let operator of operators">
                  <a role="button" class="dropdown-item" (click)="selectOperator(operator)">{{
                    operator?.name
                    }}</a>
                </li>
               
                <!-- Show message if no operators -->
                <li *ngIf="!operators || operators.length === 0" class="dropdown-item text-muted">
                  No operators found
                </li>
              </ul>
            </div>
          </div>
          <div class="header__dropdown">
            <div class="dropdown">
              <button class="btn dropdown-toggle profile-dropdown m-0" type="button" id="dropdownMenuButton1"
                data-bs-toggle="dropdown" aria-expanded="false">
                <img 
                  [src]="user && user?.profilePicture ? user?.profilePicture : avatar" 
                  class="avatar-img" 
                  
                  [alt]="user?.fullName || 'User'"
                />
                <h4 *ngIf="user?.fullName">
                  {{ user?.fullName }}
                </h4>
                <i class="fas fa-chevron-down down-icon" style="color: white;"></i>
              </button>
              <ul class="dropdown-menu user-drop p-0" aria-labelledby="dropdownMenuButton1">

                <li>
                  <a class="dropdown-item" routerLink="/profile">
                    <img src="assets/icons/profile-circle.svg
              " />
                    Profile</a>
                </li>
                <!-- <li *ngIf="!user?.authType && user?.authType !=='google'">
                  <a class="dropdown-item" routerLink="/change-password">
                    <img src="assets/icons/lock.svg
              " />
                    Change Password</a>
                </li> -->

                <li>
                  <a class="dropdown-item" routerLink="/all-operators">
                    <img src="assets/icons/bot.svg
                " />
                    All Operators</a>
                </li>
<!-- 
                <li>
                  <a class="dropdown-item" routerLink="/all-users">
                    <img src="assets/icons/profile-circle.svg
                " />
                    All Users</a>
                </li> -->

                <!-- <li>
                <a class="dropdown-item" routerLink="/change-password">
                  <img
                    src="assets/icons/billing.svg
                "
                  />
                  Billing</a
                >
              </li> -->
                <div style="border-bottom: 1px solid #dfe9f2"></div>

                <li>
                  <a class="dropdown-item cursor-pointer" (click)="signOut()">
                    <img src="assets/icons/log-out.svg
                " />
                    Signout</a>
                </li>
              </ul>
            </div>
          </div>
        </nav>
        <main class="content px-2">
          <div class="container-fluid">
            <app-warning-modal></app-warning-modal>
            <router-outlet></router-outlet>
         
          </div>
        </main>
      </div>
    </div>
  </ng-container>
</ng-template>